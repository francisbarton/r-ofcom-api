% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/area_query.R
\name{area_query}
\alias{area_query}
\title{Query Ofcom API for data from a sample of postcodes}
\usage{
area_query(
  area = NULL,
  df = NULL,
  col = postcode,
  sample_by = NULL,
  return_errors = FALSE,
  ...
)
}
\arguments{
\item{area}{The name of a local authority area (lower or upper tier) in
England or Wales. If \code{NULL}, then a data frame including a postcode variable
should be supplied instead. Will take priority over the df argument.
Automatically samples by LSOA (supplying \code{prop = 1} to \code{...} will negate any
effect of this, if undesired).}

\item{df}{User-supplied data frame containing a postcode variable.
Default is \code{NULL}.}

\item{col}{The name of the postcode variable in \code{df}. Defaults to "postcode".}

\item{sample_by}{A character vector. Names of variables to group data by
before sampling.}

\item{return_errors}{Mainly used as a debug mode. Defaults to \code{FALSE}, meaning
the function will return a nice data frame of just successful results (errors
removed). If you are not getting the results you expect, turn on
\code{return_errors} and the function will instead return a list with
components \code{result} and \code{error} for you to peruse.}

\item{...}{Arguments to pass to \code{dplyr::slice_sample()}. Either \code{prop} =
proportion or \code{n} = number. If empty, will submit just 1 postcode (1 per
group, if grouped). Use with \code{sample_by} in order to group data before
sampling (eg sample 20\% of postcodes in each LSOA).}
}
\value{
Either a tibble of successful results from the API, or a list of results
and errors (if \code{return_errors} is set to \code{TRUE}).
}
\description{
Convenience wrapper around \code{query_api} that includes a way to get a nice
tibble of results from an input df, with the option to easily retrieve
data for all  —  or a sample of  —  postcodes in a local authority area.
}
